2017/7/3
1.修正时间为清0的情况
2.重新修整

2017/7/2
1.修改时间表达形式
2.将CAN数据处理转移到主程序中。
3.完善同步合闸设置，发现尖峰脉冲原因。

2017/6/30
1.修改为大选相

2017/3/12
1.修改完善连接建立
2.重新编排文件结构
8:46 修改完善释放连接
10:12 按测试步骤完成，建立连接，获取属性，IO报文，释放连接，重新建立连接

2017/3/12
  1. C1RX0CONbits.RXFUL = 1; //解决未清0溢出问题
2.  pReciveFrame->completeFlag 未清空错误
2017/3/10
1.添加CAN驱动与DeviceNet结合部分
2.重新考虑波特率设置，调节传输设置。

2017/3/9
1.设置gun99
2.设置优化等级1
3.解决所有警告


2017/3/8
1.添加超时定时器Timer3
2.完善重复MAC检测功能

2017/3/7
21:00 修改风格，进一步理解程序。
2017/3/6
7:19 ： 开始调试CAN驱动,通过回环测试。

2017/3/31（修改人：张东旭）
1.修改程序，添加基于DeviceNet协议的分合闸预制、分合闸执行、同步分合闸预制功能。
2.添加错误消息提示函数，添加错误消息返回。

2017/4/1（修改人：张东旭）
10:00   1.添加ID号为0x10到0x14的服务
14:50   2.添加定时器4的中断处理服务程序，主要思想是固定延时，通过更改中断计数确定延时时间，
    缺点是需要两个全局变量，一个作为存储超时时间，一个作为超时时间计数器。
3.添加外部中断处理函数，使用外部中断INT1，IO口对应为RD0，光纤对应为：SYNB_IN,U28。
4.完善代码，使代码更为简洁，方便观看。
5.完善注释。

2017/4/5(修改人：张东旭)
9:00 1.添加外部中断函数的内部处理程序。
15:00 添加属性读取函数

2017/4/7(修改人：张东旭)
13:00 修改属性设置与读取的函数实现方式

2017/4/8(添加人：张东旭)
10:20 添加EEPROM处理函数,实现EEPROM实时写入功能。


2017/4/9(修改人：张东旭)
9:33 添加累加和校验函数，累加和需要以一个字（uint16）的形式，存在EEPROM中，
在上电初始化时，需要读取出来与现有数据进行比较。 
需要添加一个参数不正确需要重新设置的错误，即校验和不正确。

2017/04/11(修改人：张东旭)
9:00 添加完成CAN错误中断处理，开启所有的CAN错误中断；
    在读写EEPROM时，需要禁止中断，以防止其打乱读写进程。

2017/04/14(修改人：张东旭)
9:00 精简程序，删除闭锁程序，完成对本地和远方的控制逻辑

2017/04/19(修改人：张东旭)
9:30 重新编写发送错误数据帧；
10:00 增加分合闸电压校验
11:05 增加通信错误指示灯

2017/05/07(修改人：张东旭)
13:00 修改程序使之可以在6012A上运行
      该程序现在只能实现整体合分，而不能分开合分

2017/05/09
程序移植到6012A上，成功完成ADC数据的多路采集，合分位状态的检测，合分位错误的
检测与提示。将LED、继电器的顺序旅顺清晰，并按照要求与二次线原理图上的位置一一
对应。
主控板上的LED灯对应关系：
/******************************
 * C1  G1  H1  F1  ZH   POWER *
 * C2  G2  H2  F2  ZF   LASER *
 * C3  G3  H3  F3  WORK LASER *
 *****************************/
俯视图，右侧为光纤模块、
2017-05-10(修改人：张东旭)
程序移植后，更改CAN模块的配置，转为使用CAN2模块
完成按键扫描使用定时器中断的模式

2017/05/11(修改人：张东旭)
完成系统心跳时钟的设置；
将按键扫描的定时器与系统的心跳时钟定时器复用。
完成单个永磁控制器程序
确定同步合闸控制的方式并着手编写程序

2017/05/12(修改人：张东旭)
重新编写永磁控制程序的逻辑以及架构，改为指针控制方式。
更改通信处理函数，使之适应该逻辑
增加偏移时间判断函数，并根据偏移时间将机构的分合闸顺序调正确，首先需要绘制流程图
考虑两路与三路的区别

2017/05/14(修改人：张东旭)
完成外部中断的测试
完成了分合闸时间的IO校验
完成电容电压的参数匹配
完成部分通信函数的重写、修改
完成同步合闸的控制、偏移时间的计算（误差在10us）整体精度为2us
添加全局判断函数，在Header.h文件中，方便以后快速的更改程序使之适应小选相

2017/05/16(修改人：张东旭)
修改在做EMC实验时，发生的程序上的BUG。

2017/05/17(修改人：张东旭)
完成心跳数据上传函数的编写
完善按键扫描函数
升级分合闸次数写EEPROM的函数

2017/05/21(修改人：张东旭)
完成看门狗喂狗函数的添加
添加了同步信号识别函数
绘制完成偏移时间判断的函数，未完成程序的设计

2017/05/22(修改人：张东旭)
更改同步信号触发方式为PWM形式，且不采用中断方式，而采用循环查找的方式，频率在10K~11K之间
更改同步合闸控制函数，使用索引值对其顺序进行控制
删除定时器计时的-2操作

2017/05/23(修改人：张东旭)
完成状态上传函数的修改
完成同步合闸先后顺序和偏移时间的整定
18:30 整理程序中的宏定义，删除多余的宏定义，更改一些无意义的定义


2017/05/28(修改人：张东旭)
更改计时方式
更改同步信号识别方式
优化同步合闸逻辑控制
优化两相同步控制逻辑
优化偏移量计时方式
加入带电拒绝分闸功能

2017/06/02(修改人：张东旭)
解决总合闸按钮失效的错误
将整个的按钮控制修改为使用本合同的按钮控制逻辑（即按钮控制不考虑本地或者远方，使用硬件实现）
待解决问题：CAN总线发送错误问题

2017/06/03(修改人：张东旭)
解决单相控制合分闸未执行的错误
添加拒动处理函数
增加CAN发送函数未能正常完成发送的处理
增加CAN总线错误处理
增加定值未能成功读取EEPROM后的默认值问题
优化远方和就地控制
更改按键为不识别远方和就地（主要为适应702所合同）
解决同时合闸按键按下不执行问题
增加宏判断优化部分程序
删除累加和校验出错后的处理
通信错误主要由运行指示灯指示，运行指示灯闪烁间隔变为1.5s
拒动错误为运行指示灯闪烁间隔变为100ms

2017/06/05(修改人：张东旭)
增加按键判断条件
编写IIC模拟函数以及驱动SD2405时钟芯片
增加电容跌落电压测量
完成SD2405的驱动程序

2017/06/06(修改人：张东旭)
解决温度传感器上传值为0的问题
解决IIC总线读取时钟芯片出错问题
在时钟芯片内部写入标志位0xAA
修改EEPROM注释

2017/06/06(修改人：张东旭)
增加两段函数，分别是
void GetValueFloatInt32(PointUint8* pPoint, ConfigData* pConfig);
void SetValueFloatInt32(PointUint8* pPoint, ConfigData* pConfig);
作用是将带符号的浮点数转换为4字节整数传输，与将接收到的四字节整数转换为浮点数
增加一个联合，“PointFloat”作用是方便转换带符号的浮点数

2017/06/21(修改人：张东旭)
1.增加对分合闸命令确认的判断条件（修改错误）
2.对拒动错误判断进行优化，杜绝与其他功能的杂糅
3.修改拒动错误返回的错误信息
4.屏蔽485通信
5.解决分合位错误指示灯亮起之后，分合位指示灯依旧亮的问题（原有问题：指示灯异常，错位位置后，相应合分位指示灯依旧亮，不合理）
6.解决预制超时错误的清除、上传问题（原有问题：预制超时错误，清除。	预制超时错误上传。）
7.设置拒动错误的返回信息


2017/06/22(修改人：张东旭)
修复其中存在的部分BUG
对命名不符合规范的进行修改
增加系统时间的溢出判断（在Delay_ms()函数中增加，在按键扫描中增加）
删除远方就地控制
增加动作上锁，上锁之后不再检测控制按键，在检测完分合位是否正确之后才会对控制按键进行检测
在按键扫描时，将远方本地检测，更改为是否上锁检测
增加一个系统时钟变量，用于延时与主函数中的部分时间获取和判断

2017/06/22(修改人：张东旭)
1.增加分合闸执行的条件，防止短时间内重复合闸、或者在执行合闸时执行分闸
2.增加拒动错误的宏定义变量，增加拒动错误标识位
3.修改了拒动错误的ID号传递，在按键命令中增加了ID号的赋值，为了拒动错误时可以上传ID号
4.解决累加和计算错误的问题，不是EEPROM写不进去，而是在计算累加和是错误

2017/06/27(修改人：张东旭)
精简DeviceNet中的部分函数

2017/06/28(修改人：张东旭)
将所有依靠看门狗超时检测的都修改为软件检测
将CAN中断中的定值写入、监控数据读取，均转移到主程序中
修改同步预制函数中的BUG，修改同步控制中回路起始为0b01
修复部分BUG

2017/06/29(修改人：张东旭)
修改同步预制应答
修改同步信号识别函数
精简程序，编译级别调高






